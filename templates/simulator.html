{% extends "layout.html" %}
{% block title %}Simulator{% endblock %}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/editor.css') }}" media="screen">
<script src="{{ url_for('static', filename='js/simulator_functions.js') }}" type="text/javascript"></script>
{% endblock %}
{% block content %}
    <h1>Simulator</h1>
    <div class="row">
      <div id="3js-container" class="col-md-auto">
          <canvas>
          </canvas>
      </div>
      <div id="interface-container" class="col-md-auto">
        <div id="editor">{{ code }}</div>
        <div id="upload_controls" class="btn-toolbar justify-content-between" role="toolbar">
          <div class="btn-group mr-2" role="group">
            <input type="file" name="fileselect" class="btn btn-secondary" id="fileselect" size="1"/>
            <button type="submit" id="fileupload" class="btn btn-info">Upload</button>
          </div>
          <div class="btn-group mr-2" role="group" id="submit_conf">
            <div class="input-group-prepend">
              <button type="button" class="btn btn-primary" id="run_conf">Run Simulations</button>
            </div>
          </div>
        </div>
        <form id="sound-uploads-form" action="/simulator/uploadsounds" enctype="multipart/form-data" method="POST">
          <div id="utterance-input-controls" class="btn-toolbar" role="toolbar">
            <div class="input-group mr-2" role="group">
              <label for="utterancefile" class="input-group-text">Utterance</label>
              <input type="file" name="utterancefile" class="btn btn-secondary" id="utterancefile" size="1"/>
              <select id="utterance-select">
                  <option value="-1">Upload other file.</option>
                  {% for sound in sounds: %}
                  <option value="{{sound.id}}">{{ sound.name }}</option>
                  {% endfor %}
              </select>
            </div>
          </div>
          <div id="select-input-controls" class="btn-toolbar" role="toolbar">
            <div class="input-group mr-2" role="group">
              <label for="robot-select" class="input-group-text">Robot</label>
              <!-- <input type="file" name="utterancefile" class="btn btn-secondary" id="utterancefile" size="1"/> -->
              <select id="robot-select">
                  {% for robot in robots: %}
                  <option value="{{robot.id}}">{{ robot.name }}</option>
                  {% endfor %}
              </select>
            </div>
          </div>
        </form>
      </div>
    </div>
    <section id="uploadpopup" class="modal fade">
      <div class="modal-dialog">
        <div class="modal-body">
          <div id="spinner" class="loading">
            Loading&#8230;
          </div>
          <p>Uploading...</p>
        </div>
        <div class="modal-footer">
          <p>please wait</p>
        </div>
      </div>
    </section>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.2/ace.js" type="text/javascript"></script>
{% endblock %}
